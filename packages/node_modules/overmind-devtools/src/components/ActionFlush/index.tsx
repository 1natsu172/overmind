import { createElement, FunctionComponent } from 'react'
import { useOvermind } from '../../overmind'
import { Flush as FlushType } from '../../overmind/types'
import * as actionStyles from '../Action/styles'
import * as styles from './styles'
import * as textStyles from '../../styles/text'
import Path from '../ActionPath'
import Icon from '../common/Icon'
import { css } from 'emotion'

type Props = {
  flush: FlushType
}

const ActionFlush: FunctionComponent<Props> = ({ flush }) => {
  const { state, actions } = useOvermind()

  return (
    <div className={actionStyles.pipe}>
      <Path />
      <div className={styles.flush}>
        <div className={styles.flushHeader}>flush</div>
        <div className={styles.flushBody}>
          {flush.components.map((componentId) => (
            <div key={componentId}>
              <span className={css(textStyles.description, styles.flushItem)}>
                <span className={styles.fadedOut}>
                  <Icon>code</Icon>
                </span>{' '}
                {state.currentApp.components[componentId].name}
              </span>
            </div>
          ))}
          {flush.derived.map((derivedPath, index) => (
            <div key={derivedPath + '_' + index}>
              <span className={css(textStyles.description, styles.flushItem)}>
                <span className={styles.fadedOut}>
                  <Icon>chain</Icon>
                </span>{' '}
                {derivedPath}
              </span>
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}
export default ActionFlush
