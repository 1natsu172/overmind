import { createElement } from 'overmind-components'

import { Component } from '../../overmind'
import Inspector from '../Inspector'

type Props = {
  value: any
  small?: boolean
}

const ValueInspector: Component<Props, string[]> = (
  { value, small },
  { state = [], changeState }
) => {
  function onToggleExpand(path: string[]) {
    const pathString = path.join('.')

    if (state.includes(pathString)) {
      changeState(state.filter((currentPath) => currentPath !== pathString))
    } else {
      changeState(state.concat(pathString))
    }
  }

  return (
    <self>
      <Inspector
        value={value}
        expandedPaths={state}
        onToggleExpand={onToggleExpand}
        small={small}
      />
    </self>
  )
}

export default ValueInspector
