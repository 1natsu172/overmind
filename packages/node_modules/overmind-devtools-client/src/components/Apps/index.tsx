import { css } from 'emotion'
import { createElement } from 'overmind-components'

import { Component } from '../../overmind'
import { getAppShortName, nameToColor } from '../../overmind/utils'
import * as styles from './styles'

const Apps: Component = (_, { actions, appState }) => {
  return (
    <self className={styles.wrapper}>
      <div
        className={styles.currentApp(nameToColor(appState.currentAppName))}
        onClick={actions.toggleShowApps}
      >
        {getAppShortName(appState.currentAppName)}
      </div>
      {appState.showApps ? (
        <div>
          <div className={styles.overlay} onClick={actions.toggleShowApps} />
          <div className={styles.appsList}>
            {Object.keys(appState.apps).map((appName) => (
              <div
                className={css(
                  styles.app,
                  appState.currentAppName === appName && styles.appSelected
                )}
                key={appName}
                onClick={() => actions.selectApp(appName)}
              >
                {appName}
              </div>
            ))}
          </div>
        </div>
      ) : null}
    </self>
  )
}

export default Apps
